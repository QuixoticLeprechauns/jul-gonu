(function(){let t=document.getElementById("gameCanvas").getContext("2d")})();var l,e,x=4,_=1/12,p=class{constructor(t={x:0,y:0},n="dimgray"){this.location=t,this.past=t,this.suit=n}draw(t,n){let{location:i,suit:o}=this;e.save();let a=_*t;e.fillStyle=this.suit,e.lineWidth=a,e.beginPath(),e.strokeStyle="black";let h=.5,r=t*h,c=r*h;e.rect(this.location.x*t+c,this.location.y*t+c,r,r),e.fill(),e.stroke(),e.lineWidth=a*.5,n==this.suit?e.strokeStyle="gold":e.strokeStyle="white",e.stroke(),e.restore()}},y=class{constructor(t=4){this.size=t,this.stones=Array(t*2),this.selected_stone_index=-1,this.current_suit="dimgray",this.scale=l.width/this.size}get_pawn(t=0,n=0){for(let i=0;i<this.stones.length;i++)if(this.stones[i].location.x===t&&this.stones[i].location.y===n)return i;return-1}capture_pawns(t,n){let i=[{x:1,y:0},{x:-1,y:0},{x:0,y:-1},{x:0,y:1}];for(let o=0;o<4;o++){let a=Array(0);for(let h=1;h<this.size;h++){let r=this.get_pawn(t.location.x+i[o].x*h,t.location.y+i[o].y*h);if(r===-1)break;if(n[r].suit!=t.suit&&a.push(n[r]),n[r].suit===t.suit){for(let c=0;c<a.length;c++)n.splice(this.get_pawn(a[c].location.x,a[c].location.y),1);break}}}}draw_board(){e.clearRect(0,0,l.width,l.height),e.save(),this.selected_stone_index!=-1&&this.stones[this.selected_stone_index].suit===this.current_suit&&(e.beginPath(),e.fillStyle="darkturquoise",e.strokeStyle="darkorange",e.rect(this.stones[this.selected_stone_index].location.x*this.scale+this.scale*.1,this.stones[this.selected_stone_index].location.y*this.scale+this.scale*.1,.8*this.scale,.8*this.scale),e.fill(),e.stroke());for(let t=0;t<this.size;t++){e.beginPath(),e.lineWidth=_*this.scale,e.strokeStyle="darkgray";let n,i,o;n=.5*this.scale,i=this.scale*t+.5*this.scale,o=l.width-.5*this.scale,e.moveTo(n,i),e.lineTo(o,i),e.stroke()}for(let t=0;t<this.size;t++){e.beginPath(),e.lineWidth=_*this.scale,e.strokeStyle="darkgray";let n,i,o;i=.5*this.scale,n=this.scale*t+.5*this.scale,o=l.height-.5*this.scale,e.moveTo(n,i),e.lineTo(n,o),e.stroke()}for(let t=0;t<this.size;t++){e.beginPath(),e.lineWidth=_*this.scale*.5,e.strokeStyle="white";let n,i,o;n=.5*this.scale,i=this.scale*t+.5*this.scale,o=l.width-.5*this.scale,e.moveTo(n,i),e.lineTo(o,i),e.stroke()}for(let t=0;t<this.size;t++){e.beginPath(),e.lineWidth=_*this.scale*.5,e.strokeStyle="white";let n,i,o;i=.5*this.scale,n=this.scale*t+.5*this.scale,o=l.height-.5*this.scale,e.moveTo(n,i),e.lineTo(n,o),e.stroke()}e.restore();for(let t=0;t<this.stones.length;t++)this.stones[t].draw(this.scale,this.current_suit)}set_board(){this.stones=Array(this.size*2),this.current_suit="tomato";for(let t=0;t<this.stones.length;t++)t<this.size?this.stones[t]=new p({x:t,y:0},"dimgray"):this.stones[t]=new p({x:t-this.size,y:this.size-1},"tomato")}},s;function u(d){let t=~~((d.offsetX-.5*s.scale)/s.scale+.5),n=~~((d.offsetY-.5*s.scale)/s.scale+.5);for(let i=0;i<s.stones.length;i++)if(s.stones[i].location.x===t&&s.stones[i].location.y===n){s.selected_stone_index=i,s.draw_board();return}if(s.selected_stone_index!=-1&&s.stones[s.selected_stone_index].suit===s.current_suit){let i=s.stones[s.selected_stone_index].location.x-t,o=s.stones[s.selected_stone_index].location.y-n;Math.sqrt(i*i+o*o)===1&&(s.stones[s.selected_stone_index].location.x=t,s.stones[s.selected_stone_index].location.y=n,s.capture_pawns(s.stones[s.selected_stone_index],s.stones),s.selected_stone_index=-1,s.current_suit=="dimgray"?s.current_suit="tomato":s.current_suit="dimgray")}s.draw_board()}function w(){l=document.getElementById("gameCanvas"),l.onclick=u,e=l.getContext("2d"),s=new y(x),s.set_board(),s.draw_board()}document.addEventListener("DOMContentLoaded",w);
//# sourceMappingURL=index.js.map
