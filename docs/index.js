(function(){let t=document.getElementById("gameCanvas").getContext("2d")})();var n,e,x=4,_=class{constructor(t={x:0,y:0},o="dimgray"){this.location=t,this.suit=o}draw(t,o){let{location:i,suit:l}=this;e.save(),e.fillStyle=this.suit,e.lineWidth=7,e.beginPath(),e.strokeStyle="black";let a=t*.5,c=a*.5;e.rect(this.location.x*t+c,this.location.y*t+c,a,a),e.fill(),e.stroke(),e.lineWidth=3.5,o==this.suit?e.strokeStyle="gold":e.strokeStyle="white",e.stroke(),e.restore()}},y=class{constructor(t=4){this.size=t,this.stones=Array(t*2),this.selected_stone_index=-1,this.current_suit="dimgray",this.scale=n.width/this.size}get_pawn(t=0,o=0){for(let i=0;i<this.stones.length;i++)if(this.stones[i].location.x===t&&this.stones[i].location.y===o)return i;return-1}capture_pawns(t,o){let i=[{x:1,y:0},{x:-1,y:0},{x:0,y:-1},{x:0,y:1}];for(let l=0;l<4;l++){let r=Array(0);for(let a=1;a<this.size;a++){let c=this.get_pawn(t.location.x+i[l].x*a,t.location.y+i[l].y*a);if(c===-1)break;if(o[c].suit!=t.suit&&r.push(o[c]),o[c].suit===t.suit){for(let d=0;d<r.length;d++)o.splice(this.get_pawn(r[d].location.x,r[d].location.y),1);break}}}}draw_board(){e.clearRect(0,0,n.width,n.height),e.save(),this.selected_stone_index!=-1&&this.stones[this.selected_stone_index].suit===this.current_suit&&(e.beginPath(),e.fillStyle="gold",e.strokeStyle="darkorange",e.rect(this.stones[this.selected_stone_index].location.x*this.scale+this.scale*.1,this.stones[this.selected_stone_index].location.y*this.scale+this.scale*.1,.8*this.scale,.8*this.scale),e.fill(),e.stroke());for(let t=0;t<4;t++){e.beginPath(),e.lineWidth=10,e.strokeStyle="darkgray";let o,i,l;o=.5*this.scale,i=this.scale*t+.5*this.scale,l=n.width-.5*this.scale,e.moveTo(o,i),e.lineTo(l,i),e.stroke()}for(let t=0;t<4;t++){e.beginPath(),e.lineWidth=10,e.strokeStyle="darkgray";let o,i,l;i=.5*this.scale,o=this.scale*t+.5*this.scale,l=n.height-.5*this.scale,e.moveTo(o,i),e.lineTo(o,l),e.stroke()}for(let t=0;t<4;t++){e.beginPath(),e.lineWidth=5,e.strokeStyle="white";let o,i,l;o=.5*this.scale,i=this.scale*t+.5*this.scale,l=n.width-.5*this.scale,e.moveTo(o,i),e.lineTo(l,i),e.stroke()}for(let t=0;t<4;t++){e.beginPath(),e.lineWidth=5,e.strokeStyle="white";let o,i,l;i=.5*this.scale,o=this.scale*t+.5*this.scale,l=n.height-.5*this.scale,e.moveTo(o,i),e.lineTo(o,l),e.stroke()}e.restore();for(let t=0;t<this.stones.length;t++)this.stones[t].draw(this.scale,this.current_suit)}set_board(){this.stones=Array(this.size*2),this.current_suit="tomato";for(let t=0;t<this.stones.length;t++)t<this.size?this.stones[t]=new _({x:t,y:0},"dimgray"):this.stones[t]=new _({x:t-this.size,y:this.size-1},"tomato")}},s;function u(h){let t=~~((h.offsetX-.5*s.scale)/s.scale+.5),o=~~((h.offsetY-.5*s.scale)/s.scale+.5);for(let i=0;i<s.stones.length;i++)if(s.stones[i].location.x===t&&s.stones[i].location.y===o){s.selected_stone_index=i,s.draw_board();return}if(s.selected_stone_index!=-1&&s.stones[s.selected_stone_index].suit===s.current_suit){let i=s.stones[s.selected_stone_index].location.x-t,l=s.stones[s.selected_stone_index].location.y-o;Math.sqrt(i*i+l*l)===1&&(s.stones[s.selected_stone_index].location.x=t,s.stones[s.selected_stone_index].location.y=o,s.capture_pawns(s.stones[s.selected_stone_index],s.stones),s.selected_stone_index=-1,s.current_suit=="dimgray"?s.current_suit="tomato":s.current_suit="dimgray")}s.draw_board()}function f(){n=document.getElementById("gameCanvas"),n.onclick=u,e=n.getContext("2d"),s=new y(x),s.set_board(),s.draw_board()}document.addEventListener("DOMContentLoaded",f);
//# sourceMappingURL=index.js.map
