<!DOCTYPE html>
<html lang="en">
    <head><meta charset="UTF-8">
    <title>Jul-Gonu</title>
        <style>body {background: rgb(255, 255, 255);color: #f8f8f8;}canvas {background: #f8f8f8;padding: 0;margin: 0 auto;margin-bottom: 1rem;display: block;}</style>
    </head>
    <body>
        <canvas id="gameCanvas" width="500" height="500"></canvas>
        <script>
            let canvas,ctx;document.getElementById("gameCanvas").getContext("2d");let game_board,board_size=4;class Pawn{constructor(t={x:0,y:0},e="dimgray"){this.location=t,this.past=t,this.suit=e}draw(t,e){const{location:s,suit:a}=this;ctx.save(),ctx.fillStyle=this.suit,ctx.lineWidth=7,ctx.beginPath(),ctx.strokeStyle="black";let i=.5*t,o=.5*i;ctx.rect(this.location.x*t+o,this.location.y*t+o,i,i),ctx.fill(),ctx.stroke(),ctx.lineWidth=3.5,e==this.suit?ctx.strokeStyle="gold":ctx.strokeStyle="white",ctx.stroke(),ctx.restore()}}class board{constructor(t=4){this.size=t,this.stones=Array(2*t),this.selected_stone_index=-1,this.current_suit="dimgray",this.scale=canvas.width/this.size}get_pawn(t=0,e=0){for(let s=0;s<this.stones.length;s++)if(this.stones[s].location.x===t&&this.stones[s].location.y===e)return s;return-1}capture_pawns(t,e){let s=[{x:1,y:0},{x:-1,y:0},{x:0,y:-1},{x:0,y:1}];for(let a=0;a<4;a++){let i=Array(0);for(let o=1;o<this.size;o++){let c=this.get_pawn(t.location.x+s[a].x*o,t.location.y+s[a].y*o);if(-1===c)break;if(e[c].suit!=t.suit&&i.push(e[c]),e[c].suit===t.suit){for(let t=0;t<i.length;t++)e.splice(this.get_pawn(i[t].location.x,i[t].location.y),1);break}}}}draw_board(){ctx.clearRect(0,0,canvas.width,canvas.height),ctx.save(),-1!=this.selected_stone_index&&this.stones[this.selected_stone_index].suit===this.current_suit&&(ctx.beginPath(),ctx.fillStyle="darkturquoise",ctx.strokeStyle="darkorange",ctx.rect(this.stones[this.selected_stone_index].location.x*this.scale+.1*this.scale,this.stones[this.selected_stone_index].location.y*this.scale+.1*this.scale,.8*this.scale,.8*this.scale),ctx.fill(),ctx.stroke());for(let t=0;t<this.size;t++){let e,s,a;ctx.beginPath(),ctx.lineWidth=10,ctx.strokeStyle="darkgray",e=.5*this.scale,s=this.scale*t+.5*this.scale,a=canvas.width-.5*this.scale,ctx.moveTo(e,s),ctx.lineTo(a,s),ctx.stroke()}for(let t=0;t<this.size;t++){let e,s,a;ctx.beginPath(),ctx.lineWidth=10,ctx.strokeStyle="darkgray",s=.5*this.scale,e=this.scale*t+.5*this.scale,a=canvas.height-.5*this.scale,ctx.moveTo(e,s),ctx.lineTo(e,a),ctx.stroke()}for(let t=0;t<this.size;t++){let e,s,a;ctx.beginPath(),ctx.lineWidth=5,ctx.strokeStyle="white",e=.5*this.scale,s=this.scale*t+.5*this.scale,a=canvas.width-.5*this.scale,ctx.moveTo(e,s),ctx.lineTo(a,s),ctx.stroke()}for(let t=0;t<this.size;t++){let e,s,a;ctx.beginPath(),ctx.lineWidth=5,ctx.strokeStyle="white",s=.5*this.scale,e=this.scale*t+.5*this.scale,a=canvas.height-.5*this.scale,ctx.moveTo(e,s),ctx.lineTo(e,a),ctx.stroke()}ctx.restore();for(let t=0;t<this.stones.length;t++)this.stones[t].draw(this.scale,this.current_suit)}set_board(){this.stones=Array(2*this.size),this.current_suit="tomato";for(let t=0;t<this.stones.length;t++)t<this.size?this.stones[t]=new Pawn({x:t,y:0},"dimgray"):this.stones[t]=new Pawn({x:t-this.size,y:this.size-1},"tomato")}}function on_click(t){let e=~~((t.offsetX-.5*game_board.scale)/game_board.scale+.5),s=~~((t.offsetY-.5*game_board.scale)/game_board.scale+.5);for(let t=0;t<game_board.stones.length;t++)if(game_board.stones[t].location.x===e&&game_board.stones[t].location.y===s)return game_board.selected_stone_index=t,void game_board.draw_board();if(-1!=game_board.selected_stone_index&&game_board.stones[game_board.selected_stone_index].suit===game_board.current_suit){let t=game_board.stones[game_board.selected_stone_index].location.x-e,a=game_board.stones[game_board.selected_stone_index].location.y-s;1===Math.sqrt(t*t+a*a)&&(game_board.stones[game_board.selected_stone_index].location.x=e,game_board.stones[game_board.selected_stone_index].location.y=s,game_board.capture_pawns(game_board.stones[game_board.selected_stone_index],game_board.stones),game_board.selected_stone_index=-1,"dimgray"==game_board.current_suit?game_board.current_suit="tomato":game_board.current_suit="dimgray")}game_board.draw_board()}function init(){canvas=document.getElementById("gameCanvas"),canvas.onclick=on_click,ctx=canvas.getContext("2d"),game_board=new board(board_size),game_board.set_board(),game_board.draw_board()}document.addEventListener("DOMContentLoaded",init);
        </script>
    </body>
</html>

